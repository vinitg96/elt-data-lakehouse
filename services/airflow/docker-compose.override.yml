services:
  api-server:
    volumes:
      - ../dbt_workflow:/usr/local/airflow/include/dbt_workflow:rw
      - ../../data/:/usr/local/airflow/include/data:rw
      - ../../utils/ingestao_minio.py:/usr/local/airflow/ingestao_minio.py:rw
      - ../dbt_workflow/datawarehouse/:/usr/local/airflow/datawarehouse/:rw
    networks:
    - airflow_network

  scheduler:
    volumes:
      - ../dbt_workflow:/usr/local/airflow/include/dbt_workflow:rw
      - ../../data/:/usr/local/airflow/include/data:rw
      - ../../utils/ingestao_minio.py:/usr/local/airflow/ingestao_minio.py:rw
      - ../dbt_workflow/datawarehouse/:/usr/local/airflow/datawarehouse/:rw
    networks:
    - airflow_network

  triggerer:
    volumes:
      - ../dbt_workflow:/usr/local/airflow/include/dbt_workflow:rw
      - ../../data/:/usr/local/airflow/include/data:rw
      - ../../utils/ingestao_minio.py:/usr/local/airflow/ingestao_minio.py:rw
      - ../dbt_workflow/datawarehouse/:/usr/local/airflow/datawarehouse/:rw
    networks:
    - airflow_network

  dag-processor:
    volumes:
      - ../dbt_workflow:/usr/local/airflow/include/dbt_workflow:rw
      - ../../data/:/usr/local/airflow/include/data:rw
      - ../../utils/ingestao_minio.py:/usr/local/airflow/ingestao_minio.py:rw
      - ../dbt_workflow/datawarehouse/:/usr/local/airflow/datawarehouse/:rw
    networks:
    - airflow_network

networks:
  airflow_network:
    external: true 